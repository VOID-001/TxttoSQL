from fastapi import APIRouter, HTTPException
from utils.pgvector_client import PGVectorClient

display_router = APIRouter()

# Initialize PGVector Client
pgvector_client = PGVectorClient("postgresql://postgres:password@localhost:5432/vector")

@display_router.get("/display/")
async def display():
    try:
        # Fetch all data from PGVector
        all_data = pgvector_client.get_all_embeddings()

        if not all_data:
            return {"detail": "No data in the collection"}

        return {"data": all_data}

    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Error fetching data: {str(e)}")
